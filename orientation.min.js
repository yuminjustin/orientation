/*yuminjustin  2014/9/22  Wuhan China*/
(function($){var Events,Orien;Events=['vertical','hLeft','hRight','shake'];Events.forEach(function(eventName){$.fn[eventName]=function(){var orien=new Orien($(this),eventName);orien.start();return this.on(eventName,arguments[0])}});Orien=function(){this.target=arguments[0];this.e=arguments[1];this.shakehold=4800;this.s={u:0,x:0,y:0,z:0,lx:0,ly:0,lz:0}};Orien.prototype.start=function(){var self=this;var status=0;var oc=function(e){e.preventDefault();status=window.orientation;self.factory(status)};window.addEventListener("orientationchange",oc,false);if(window.DeviceMotionEvent){var dm=function(e){e.preventDefault();var acceleration=e.accelerationIncludingGravity;var curTime=new Date().getTime();if((curTime-self.s.u)>100){var diffTime=curTime-self.s.u;self.s.u=curTime;self.s.x=acceleration.x;self.s.y=acceleration.y;self.s.z=acceleration.z;var speed=Math.abs(self.s.x+self.s.y+self.s.z-self.s.lx-self.s.ly-self.s.lz)/diffTime*10000;if(speed>self.shakehold){status=3;self.factory(status)}self.s.lx=self.s.x;self.s.ly=self.s.y;self.s.lz=self.s.z}};window.addEventListener('devicemotion',dm,false)}};Orien.prototype.factory=function(e){switch(e){case 0:e="vertical";break;case 90:e="hLeft";break;case-90:e="hRight";break;case 3:e="shake";break}if(this.e==e)this.target.trigger(e)}})(window.jQuery||window.Zepto);